(()=>{"use strict";function e(e){localStorage.setItem("todoList",JSON.stringify(e))}function t(){const e=localStorage.getItem("todos");if(!e)return[];try{const t=JSON.parse(e);return Array.isArray(t)?t:[]}catch(e){return console.error("Error parsing todos from localStorage:",e),[]}}t();let n=t();function d(o){const i=document.getElementById("todo-list");i.innerHTML="",Array.isArray(o)||(o=[]).push(t()),o.forEach((t=>{const o=document.createElement("li");o.textContent=`${t.title} - ${t.date}`,i.appendChild(o);const l=document.createElement("button");l.textContent="Bearbeiten",l.addEventListener("click",(function(){const i=document.createElement("input"),l=document.createElement("input"),a=document.createElement("input");l.type="date",l.value=t.date,i.type="text",i.value=t.title,i.placeholder="Title",a.type="text",a.value=t.details,a.placeholder="Details",o.innerHTML="",o.appendChild(i),o.appendChild(a),o.appendChild(l);const c=document.createElement("button");function r(){t.title=i.value.trim(),t.details=a.value.trim(),t.date=l.value.trim(),o.textContent=t.title,o.textContent+=" "+t.details,o.textContent+=" "+t.date,e(n.map((e=>e.id===t.id?t:e))),d(n)}c.textContent="Speichern",o.appendChild(c),c.addEventListener("click",r),i.addEventListener("keydown",(e=>{"Enter"===e.key&&r()})),c.addEventListener("click",r),i.addEventListener("keydown",(function(e){"Enter"===e.key&&r()}))})),o.appendChild(l);const a=document.createElement("button");a.textContent="Delete",a.addEventListener("click",(function(){i.removeChild(o),n=n.filter((e=>e.id!==t.id)),e(n)})),o.appendChild(a);const c=document.getElementById("task-description"),r=document.createElement("span");r.id="description-display",r.style.display="none",o.appendChild(r);const s=document.createElement("button");s.textContent="Details",s.addEventListener("click",(()=>{"none"===r.style.display?(r.textContent=c.value,r.style.display="block",s.textContent="Weniger anzeigen"):(r.style.display="none",s.textContent="Mehr Details")})),o.appendChild(s),i.appendChild(o)}))}document.getElementById("add-task-form").addEventListener("submit",(t=>{t.preventDefault(),function(){const t=document.getElementById("task"),n=document.getElementById("todo-list"),d=document.getElementById("add-task-form"),o=(document.getElementById("task-description"),document.getElementById("task-date")),i=document.createElement("li"),l=Date.now();i.id=`listElm-${l}`,i.textContent=`${t.value}-${o.value}`,n.appendChild(i),t.value="",d.style.display="none",e(n.innerHTML),function(t){const d=document.createElement("button");d.textContent="löschen",d.id="deleteTask-btn",t.appendChild(d),d.addEventListener("click",(()=>{n.removeChild(t)})),e(n.innerHTML)}(i),(e=>{const t=document.getElementById(e),n=document.createElement("button");n.id="editBtn",n.textContent="Bearbeiten",n.addEventListener("click",(()=>{t.textContent.trim();const e=document.createElement("input"),n=document.createElement("input"),d=document.createElement("input");n.type="date",n.value="",e.type="text",e.value="",e.placeholder="Titel",d.type="text",d.value="",d.placeholder="Details",t.appendChild(e),t.appendChild(d),t.appendChild(n);const o=document.createElement("button");function i(){const i=e.value.trim(),l=n.value.trim(),a=d.value.trim();t.textContent=i,t.textContent+=" "+a,t.textContent+=" "+l,t.removeChild(e),t.removeChild(o)}o.textContent="Speichern",t.appendChild(o),o.addEventListener("click",i),e.addEventListener("keydown",(e=>{"Enter"===e.key&&i()}))})),t.appendChild(n)})(`listElm-${l}`),function(e){const t=document.getElementById(e),n=document.getElementById("task-description"),d=document.createElement("span");d.id="description-display",d.style.display="none",t.appendChild(d);const o=document.createElement("button");o.id="description-btn",o.textContent="Mehr Details",o.addEventListener("click",(()=>{"none"===d.style.display?(d.textContent=n.value,d.style.display="block",o.textContent="Weniger anzeigen"):(d.style.display="none",o.textContent="Mehr Details")})),t.appendChild(o)}(`listElm-${l}`)}()})),document.addEventListener("DOMContentLoaded",(function(){const e=t();e&&(document.getElementById("todo-list").innerHTML=e)})),document.addEventListener("DOMContentLoaded",(function(){const e=t();Array.isArray(e)&&e.length>0?d(e):console.log("Keine gespeicherten Todos gefunden oder ungültiges Format.")})),function(){const e=document.getElementById("show-input-btn"),t=document.getElementById("input-container"),n=document.getElementById("add-task-form");document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("add-task-form"),t=document.createElement("input");t.type="text",t.id="task-description",t.name="taskDescription",t.placeholder="Beschreibung der Aufgabe",e.insertBefore(t,e.lastElementChild);const n=document.createElement("input");n.type="date",n.id="task-date",n.name="taskDate",e.insertBefore(n,e.lastElementChild)})),e.addEventListener("click",(()=>{t.style.display="block",n.style.display="block"}))}(),function(){const t=document.getElementById("addCategory-Btn"),n=Date.now();t.addEventListener("click",(function(){const d=document.createElement("input");d.type="text",d.placeholder="Name der Category",d.id=`category-${n}`,t.parentNode.insertBefore(d,t.nextSibling);const o=document.createElement("button");o.id=`saveAddButton-${n}`,o.textContent="Bestätigen",t.parentNode.insertBefore(o,d.nextSibling),o.addEventListener("click",(function(){if(""!==d.value.trim()){const e=document.createElement("button");e.textContent=d.value,e.id=`categoryBtn-${n}`,e.addEventListener("click",(function(e){e.preventDefault(),document.getElementById("todo-list").innerHTML=""}));const t=document.getElementById("home-Btn");t.parentNode.insertBefore(e,t.nextElementSibling),d.remove(),o.remove()}})),d.addEventListener("keypress",(function(t){if("Enter"===t.key&&""!==t.target.value.trim()){e(document.getElementById("todo-list").innerHTML);const i=document.createElement("button");i.textContent=t.target.value,i.id=`categoryBtn-${n}`,i.addEventListener("click",(function(e){e.preventDefault(),document.getElementById("todo-list").innerHTML="",d.value=""}));const l=document.getElementById("home-Btn");l.parentNode.insertBefore(i,l.nextElementSibling),t.target.remove(),o.remove()}}))}))}(),function(){const o=document.getElementById("todo-list");document.getElementById("home-Btn").addEventListener("click",(function(i){i.preventDefault();const l=t();document.getElementById("todo-list").innerHTML=null!==l?l:"<p>Keine Todos gefunden. Füge einige hinzu!</p>",function(){const t={id:Date.now(),title:document.getElementById("task").value,details:document.getElementById("task-description").value,date:document.getElementById("task-date").value};n.push(t),e(n),d(n)}(),d(o)}))}()})();